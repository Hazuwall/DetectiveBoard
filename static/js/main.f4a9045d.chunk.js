(this["webpackJsonpdetective-board"]=this["webpackJsonpdetective-board"]||[]).push([[0],{26:function(e,t,n){},32:function(e,t,n){e.exports=n(47)},42:function(e,t,n){},43:function(e,t,n){},44:function(e,t,n){},45:function(e,t,n){},46:function(e,t,n){},47:function(e,t,n){"use strict";n.r(t);var c=n(0),r=n.n(c),o=n(13),i=n.n(o),a=n(49),l=n(30),u=n(6),d=n(5),s=n(28),m=n(29),y=n.n(m),p=n(2),f="ADD_PIN",b="ADD_ROPE",O="TOGGLE_TOOL",T="MOVE_ITEM",v="MOVE_NODE",j="REMOVE_ITEM",E="SELECT_ITEM",g="UNSELECT_ITEM",x="ADD_PIN_TOOL",h="MOVE_TOOL",w="REMOVE_TOOL",I="TIE_ROPE_TOOL";var S=n(19),k=n(3),D="PIN",_="ROPE";function M(e,t,n){return e.map((function(e){return e.id===t?Object(p.a)(Object(p.a)({},e),{},{isSelected:n}):e}))}var N=Object(u.c)({board:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{toolType:h},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case O:return Object(p.a)(Object(p.a)({},e),{},{toolType:e.toolType===t.toolType?h:t.toolType});default:return e}},items:function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(e={selectedItem:null},Object(k.a)(e,D,[]),Object(k.a)(e,"nodes",[]),Object(k.a)(e,_,[]),e),c=arguments.length>1?arguments[1]:void 0;switch(c.type){case f:var r=n[D],o=n.nodes,i=r.reduce((function(e,t){return Math.max(t.id,e)}),0)+1;return Object(p.a)(Object(p.a)({},n),{},(t={},Object(k.a)(t,D,[].concat(Object(S.a)(r),[{id:i,x:c.x,y:c.y,isSelected:!1}])),Object(k.a)(t,"nodes",[].concat(Object(S.a)(o),[{id:i,x:c.x,y:c.y}])),t));case b:var a=n[_];return Object(p.a)(Object(p.a)({},n),{},Object(k.a)({},_,[].concat(Object(S.a)(a),[{id:a.reduce((function(e,t){return Math.max(t.id,e)}),0)+1,node1:c.node1,node2:c.node2,isSelected:!1}])));case T:return Object(p.a)(Object(p.a)({},n),{},Object(k.a)({},c.itemType,n[c.itemType].map((function(e){return e.id===c.id?Object(p.a)(Object(p.a)({},e),{},{x:c.x,y:c.y}):e}))));case v:return Object(p.a)(Object(p.a)({},n),{},{nodes:n.nodes.map((function(e){return e.id===c.id?Object(p.a)(Object(p.a)({},e),{},{x:c.x,y:c.y}):e}))});case j:var l;return c.itemType===D?Object(p.a)(Object(p.a)({},n),{},(l={},Object(k.a)(l,c.itemType,n[c.itemType].filter((function(e){return e.id!==c.id}))),Object(k.a)(l,"nodes",n.nodes.filter((function(e){return e.id!==c.id}))),Object(k.a)(l,_,n[_].filter((function(e){return e.node1!==c.id&&e.node2!==c.id}))),l)):Object(p.a)(Object(p.a)({},n),{},Object(k.a)({},c.itemType,n[c.itemType].filter((function(e){return e.id!==c.id}))));case E:var u={id:c.id,itemType:c.itemType},d=n.selectedItem;if(null!==d){var s,m=M(n[d.itemType],d.id,!1);return d.itemType===c.itemType?Object(p.a)(Object(p.a)({},n),{},Object(k.a)({selectedItem:u},c.itemType,M(m,c.id,!0))):Object(p.a)(Object(p.a)({},n),{},(s={selectedItem:u},Object(k.a)(s,c.itemType,M(n[c.itemType],c.id,!0)),Object(k.a)(s,n.selectedItem.itemType,m),s))}return Object(p.a)(Object(p.a)({},n),{},Object(k.a)({selectedItem:u},c.itemType,M(n[c.itemType],c.id,!0)));case g:case O:var y=n.selectedItem;return null===n.selectedItem?n:Object(p.a)(Object(p.a)({},n),{},Object(k.a)({selectedItem:null},y.itemType,M(n[y.itemType],y.id,!1)));default:return n}}}),C=(n(42),n(43),n(16)),P=n(51),L=(n(44),n(50)),R=function(e,t){return function(n,c){var r=c().board;return r.toolType===x?n(function(e,t){return{type:f,x:e,y:t}}(e,t)):null!==r.selectedItem?n(A()):void 0}};var V=function(e,t){return function(n,c){var r,o,i,a=c(),l=a.items.selectedItem;switch(a.board.toolType){case w:return n(function(e,t){return{type:j,id:e,itemType:t}}(e,t));case I:return t===D?(null!==l&&l.itemType===D&&l.id!==e&&(r=a.items[_],o=e,i=l.id,r.some((function(e){return e.node1===o&&e.node2===i||e.node1===i&&e.node2===o}))||n(function(e,t){return{type:b,node1:e,node2:t}}(e,l.id))),n(function(e,t){return{type:E,id:e,itemType:t}}(e,t))):void 0;default:return}}},A=function(e,t){return{type:g,id:e,itemType:t}},B=(n(45),Object(d.b)((function(e){return{canSelect:(t=e.board.toolType,t===w||t===I)};var t}),(function(e){return{onDrag:function(t,n,c,r){e(function(e,t,n,c){return{type:T,id:e,itemType:t,x:n,y:c}}(t,n,c,r)),e(function(e,t,n){return{type:v,id:e,x:t,y:n}}(t,c,r))},onSelect:function(t,n){e(V(t,n))}}}))((function(e){var t=e.id,n=e.itemType,c=e.x,o=e.y,i=(e.isSelected,e.canSelect),a=e.onDrag,l=e.onSelect,u=e.children,d=Object(L.a)({item:{type:n,id:t},collect:function(e){return{isDragging:!!e.isDragging()}},end:function(e,r){var i=r.getDropResult();if(i){var l=i.delta;a(t,n,c+l.x,o+l.y)}}}),s=Object(C.a)(d,2),m=s[0].isDragging,y=s[1];return r.a.createElement("div",{className:"draggable-item-box",onClick:function(e){l(t,n),e.stopPropagation()},style:{left:c,top:o,opacity:m?.5:1,cursor:i?"pointer":"move"},ref:y},u)})));var G=function(e){var t=e.id,n=e.x,c=e.y,o=e.isSelected;return r.a.createElement(B,{id:t,itemType:D,x:n,y:c,isSelected:o},r.a.createElement("svg",{width:"25px",height:"25px",viewBox:"0 0 100 100",version:"1.1",fill:o?"yellow":"blue",xmlns:"http://www.w3.org/2000/svg"},r.a.createElement("circle",{cx:"50",cy:"50",r:"50"})))},J=(n(46),Object(d.b)((function(e){return{canSelect:e.board.toolType===w}}),(function(e){return{onSelect:function(t){e(V(t,_))}}}))((function(e){var t=e.id,n=e.node1,c=e.node2,o=e.isSelected,i=e.canSelect,a=e.onSelect;return r.a.createElement("line",{className:"rope",onClick:function(e){a(t),e.stopPropagation()},x1:n.x,y1:n.y,x2:c.x,y2:c.y,stroke:o?"yellow":"red",cursor:i?"pointer":"auto"})}))),W=function(e,t){var n=t.find((function(t){return t.id===e}));return{x:n.x,y:n.y}},F=Object(d.b)((function(e){return{items:e.items}}),(function(e){return{onClick:function(t){e(R(t.nativeEvent.offsetX,t.nativeEvent.offsetY))}}}))((function(e){e.onDrop;var t=e.onClick,n=e.items,c=Object(P.a)({accept:D,drop:function(e,t){var n=t.getItem();n.id,n.type;return{delta:t.getDifferenceFromInitialOffset()}}}),o=Object(C.a)(c,2)[1];return r.a.createElement("div",{onClick:t,ref:o,className:"board"},r.a.createElement("svg",{className:"svg-container",viewBox:"0 0 800 800",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},n[_].map((function(e){return r.a.createElement(J,{key:e.id,id:e.id,node1:W(e.node1,n.nodes),node2:W(e.node2,n.nodes),isSelected:e.isSelected})}))),n[D].map((function(e){return r.a.createElement(G,{key:e.id,id:e.id,x:e.x,y:e.y,isSelected:e.isSelected})})))})),U=(n(26),Object(d.b)((function(e){return{currentToolType:e.board.toolType}}),(function(e){return{onToggle:function(t){e({type:O,toolType:t})}}}))((function(e){var t=e.onToggle,n=e.currentToolType,c=e.toolType,o=e.text;return r.a.createElement("div",null,r.a.createElement("button",{style:{backgroundColor:c===n?"red":"grey"},onClick:function(){return t(c)}},o))}))),X=function(){return r.a.createElement("div",{className:"toolbar"},r.a.createElement(U,{text:"Move",toolType:h}),r.a.createElement(U,{text:"AddPin",toolType:x}),r.a.createElement(U,{text:"TieRope",toolType:I}),r.a.createElement(U,{text:"Remove",toolType:w}))};var Y=function(){return r.a.createElement("div",{className:"app"},r.a.createElement(X,null),r.a.createElement(F,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var $=Object(u.d)(N,Object(u.a)(s.a,y.a));i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(d.a,{store:$},r.a.createElement(a.a,{backend:l.a},r.a.createElement(Y,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[32,1,2]]]);
//# sourceMappingURL=main.f4a9045d.chunk.js.map